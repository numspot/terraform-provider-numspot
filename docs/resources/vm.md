---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "numspot_vm Resource - terraform-provider-numspot"
subcategory: ""
description: |-
  
---

# numspot_vm (Resource)



## Example Usage

```terraform
resource "numspot_vpc" "vpc" {
  ip_range = "10.101.0.0/16"
}

resource "numspot_subnet" "subnet" {
  vpc_id                 = numspot_vpc.vpc.id
  ip_range               = "10.101.1.0/24"
  availability_zone_name = "cloudgouv-eu-west-1a"
}

resource "numspot_security_group" "sg" {
  vpc_id      = numspot_vpc.vpc.id
  name        = "terraform-vm-tests-sg-name"
  description = "terraform-vm-tests-sg-description"

  inbound_rules = [
    {
      from_port_range = 80
      to_port_range   = 80
      ip_ranges       = ["0.0.0.0/0"]
      ip_protocol     = "tcp"
    }
  ]
}

resource "numspot_internet_gateway" "igw" {
  vpc_id = numspot_vpc.net.id
}

resource "numspot_route_table" "rt" {
  vpc_id    = numspot_vpc.vpc.id
  subnet_id = numspot_subnet.subnet.id

  routes = [
    {
      destination_ip_range = "0.0.0.0/0"
      gateway_id           = numspot_internet_gateway.igw.id
    }
  ]
}

resource "numspot_public_ip" "public_ip" {
  vm_id      = numspot_vm.vm.id
  depends_on = [numspot_route_table.rt]
}

resource "numspot_vm" "vm" {
  image_id                       = "ami-0987a84b"
  type                           = "ns-eco6-2c8r"
  vm_initiated_shutdown_behavior = "stop"

  placement = {
    tenancy                = "default"
    availability_zone_name = "cloudgouv-eu-west-1a"
  }

  subnet_id          = numspot_subnet.subnet.id
  security_group_ids = [numspot_security_group.sg.id]

  tags = [
    {
      key   = "name"
      value = "Terraform-Test-VM"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image_id` (String) The ID of the OMI used to create the VM. You can find the list of OMIs by calling the [ReadImages](#readimages) method.
- `subnet_id` (String) The ID of the Subnet in which you want to create the VM. If you specify this parameter, you must not specify the `Nics` parameter.

### Optional

- `block_device_mappings` (Attributes List) One or more block device mappings. (see [below for nested schema](#nestedatt--block_device_mappings))
- `client_token` (String) A unique identifier which enables you to manage the idempotency.
- `deletion_protection` (Boolean) If true, you cannot delete the VM unless you change this parameter back to false.
- `keypair_name` (String) The name of the keypair.
- `max_vms_count` (Number) The maximum number of VMs you want to create. If all the VMs cannot be created, the largest possible number of VMs above MinVmsCount is created.
- `min_vms_count` (Number) The minimum number of VMs you want to create. If this number of VMs cannot be created, no VMs are created.
- `nested_virtualization` (Boolean) (dedicated tenancy only) If true, nested virtualization is enabled. If false, it is disabled.
- `placement` (Attributes) Information about the placement of the VM. (see [below for nested schema](#nestedatt--placement))
- `private_ips` (List of String) One or more private IPs of the VM.
- `security_group_ids` (List of String) One or more IDs of security group for the VMs.
- `security_groups` (List of String) One or more names of security groups for the VMs.
- `tags` (Attributes List) One or more tags associated with the resource. (see [below for nested schema](#nestedatt--tags))
- `type` (String) The type of VM.
- `user_data` (String) Data or script used to add a specific configuration to the VM. It must be Base64-encoded and is limited to 500 kibibytes (KiB).
- `vm_initiated_shutdown_behavior` (String) The VM behavior when you stop it. By default or if set to `stop`, the VM stops. If set to `restart`, the VM stops then automatically restarts. If set to `terminate`, the VM stops and is terminated.

### Read-Only

- `architecture` (String) The architecture of the VM (`i386` \| `x86_64`).
- `creation_date` (String) The date and time of creation of the VM.
- `hypervisor` (String) The hypervisor type of the VMs (`ovm` \| `xen`).
- `id` (String) The ID of the VM.
- `initiated_shutdown_behavior` (String) The VM behavior when you stop it. If set to `stop`, the VM stops. If set to `restart`, the VM stops then automatically restarts. If set to `terminate`, the VM stops and is deleted.
- `is_source_dest_checked` (Boolean) (Vpc only) If true, the source/destination check is enabled. If false, it is disabled. This value must be false for a NAT VM to perform network address translation (NAT) in a Vpc.
- `launch_number` (Number) The number for the VM when launching a group of several VMs (for example, `0`, `1`, `2`, and so on).
- `nics` (Attributes List) (Vpc only) The network interface cards (NICs) the VMs are attached to. (see [below for nested schema](#nestedatt--nics))
- `os_family` (String) Indicates the operating system (OS) of the VM.
- `private_dns_name` (String) The name of the private DNS.
- `private_ip` (String) The primary private IP of the VM.
- `product_codes` (List of String) The product codes associated with the OMI used to create the VM.
- `public_dns_name` (String) The name of the public DNS.
- `public_ip` (String) The public IP of the VM.
- `reservation_id` (String) The reservation ID of the VM.
- `root_device_name` (String) The name of the root device for the VM (for example, `/dev/sda1`).
- `root_device_type` (String) The type of root device used by the VM (always `bsu`).
- `state` (String) The state of the VM (`pending` \| `running` \| `stopping` \| `stopped` \| `shutting-down` \| `terminated` \| `quarantine`).
- `state_reason` (String) The reason explaining the current state of the VM.
- `vpc_id` (String) The ID of the Vpc in which the VM is running.

<a id="nestedatt--block_device_mappings"></a>
### Nested Schema for `block_device_mappings`

Optional:

- `bsu` (Attributes) Information about the BSU volume to create. (see [below for nested schema](#nestedatt--block_device_mappings--bsu))
- `device_name` (String) The device name for the volume. For a root device, you must use `/dev/sda1`. For other volumes, you must use `/dev/sdX`, `/dev/sdXX`, `/dev/xvdX`, or `/dev/xvdXX` (where the first `X` is a letter between `b` and `z`, and the second `X` is a letter between `a` and `z`).
- `no_device` (String) Removes the device which is included in the block device mapping of the OMI.
- `virtual_device_name` (String) The name of the virtual device (`ephemeralN`).

<a id="nestedatt--block_device_mappings--bsu"></a>
### Nested Schema for `block_device_mappings.bsu`

Optional:

- `delete_on_vm_deletion` (Boolean) By default or if set to true, the volume is deleted when terminating the VM. If false, the volume is not deleted when terminating the VM.
- `iops` (Number) The number of I/O operations per second (IOPS). This parameter must be specified only if you create an `io1` volume. The maximum number of IOPS allowed for `io1` volumes is `13000` with a maximum performance ratio of 300 IOPS per gibibyte.
- `snapshot_id` (String) The ID of the snapshot used to create the volume.
- `volume_size` (Number) The size of the volume, in gibibytes (GiB).<br />
If you specify a snapshot ID, the volume size must be at least equal to the snapshot size.<br />
If you specify a snapshot ID but no volume size, the volume is created with a size similar to the snapshot one.
- `volume_type` (String) The type of the volume (`standard` \| `io1` \| `gp2`). If not specified in the request, a `standard` volume is created.<br />

Read-Only:

- `link_date` (String) The date and time of attachment of the volume to the VM, in ISO 8601 date-time format.
- `state` (String) The state of the volume.
- `volume_id` (String) The ID of the volume.



<a id="nestedatt--placement"></a>
### Nested Schema for `placement`

Optional:

- `availability_zone_name` (String) The name of the Subregion. If you specify this parameter, you must not specify the `Nics` parameter.
- `tenancy` (String) The tenancy of the VM (`default`, `dedicated`, or a dedicated group ID).


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Required:

- `key` (String) The key of the tag, with a minimum of 1 character.
- `value` (String) The value of the tag, between 0 and 255 characters.


<a id="nestedatt--nics"></a>
### Nested Schema for `nics`

Read-Only:

- `description` (String) The description of the NIC.
- `is_source_dest_checked` (Boolean) (Vpc only) If true, the source/destination check is enabled. If false, it is disabled. This value must be false for a NAT VM to perform network address translation (NAT) in a Vpc.
- `link_nic` (Attributes) Information about the network interface card (NIC). (see [below for nested schema](#nestedatt--nics--link_nic))
- `link_public_ip` (Attributes) Information about the public IP associated with the NIC. (see [below for nested schema](#nestedatt--nics--link_public_ip))
- `mac_address` (String) The Media Access Control (MAC) address of the NIC.
- `nic_id` (String) The ID of the NIC.
- `private_dns_name` (String) The name of the private DNS.
- `private_ips` (Attributes List) The private IP or IPs of the NIC. (see [below for nested schema](#nestedatt--nics--private_ips))
- `security_groups` (Attributes List) One or more IDs of security groups for the NIC. (see [below for nested schema](#nestedatt--nics--security_groups))
- `state` (String) The state of the NIC (`available` \| `attaching` \| `in-use` \| `detaching`).
- `subnet_id` (String) The ID of the Subnet for the NIC.
- `vpc_id` (String) The ID of the Vpc for the NIC.

<a id="nestedatt--nics--link_nic"></a>
### Nested Schema for `nics.link_nic`

Read-Only:

- `delete_on_vm_deletion` (Boolean) If true, the NIC is deleted when the VM is terminated.
- `device_number` (Number) The device index for the NIC attachment (between `1` and `7`, both included).
- `link_nic_id` (String) The ID of the NIC to attach.
- `state` (String) The state of the attachment (`attaching` \| `attached` \| `detaching` \| `detached`).


<a id="nestedatt--nics--link_public_ip"></a>
### Nested Schema for `nics.link_public_ip`

Read-Only:

- `public_dns_name` (String) The name of the public DNS.
- `public_ip` (String) The public IP associated with the NIC.


<a id="nestedatt--nics--private_ips"></a>
### Nested Schema for `nics.private_ips`

Read-Only:

- `is_primary` (Boolean) If true, the IP is the primary private IP of the NIC.
- `link_public_ip` (Attributes) Information about the public IP associated with the NIC. (see [below for nested schema](#nestedatt--nics--private_ips--link_public_ip))
- `private_dns_name` (String) The name of the private DNS.
- `private_ip` (String) The private IP.

<a id="nestedatt--nics--private_ips--link_public_ip"></a>
### Nested Schema for `nics.private_ips.link_public_ip`

Read-Only:

- `public_dns_name` (String) The name of the public DNS.
- `public_ip` (String) The public IP associated with the NIC.



<a id="nestedatt--nics--security_groups"></a>
### Nested Schema for `nics.security_groups`

Read-Only:

- `security_group_id` (String) The ID of the security group.
- `security_group_name` (String) The name of the security group.
