---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "numspot_load_balancer Resource - terraform-provider-numspot"
subcategory: ""
description: |-
  
---

# numspot_load_balancer (Resource)



## Example Usage

```terraform
## Internal Load Balancer

resource "numspot_vpc" "vpc" {
  ip_range = "10.101.0.0/16"
}

resource "numspot_subnet" "subnet" {
  vpc_id   = numspot_vpc.vpc.id
  ip_range = "10.101.1.0/24"
}

resource "numspot_security_group" "sg" {
  net_id      = numspot_vpc.vpc.id
  name        = "My SG Group"
  description = "terraform-vm-tests-sg-description"

  inbound_rules = [
    {
      from_port_range = 80
      to_port_range   = 80
      ip_ranges       = ["0.0.0.0/0"]
      ip_protocol     = "tcp"
    }
  ]
  outbound_rules = [
    {
      from_port_range = 80
      to_port_range   = 80
      ip_ranges       = ["0.0.0.0/0"]
      ip_protocol     = "tcp"
    },
  ]
}

resource "numspot_vm" "vm" {
  image_id  = "ami-0b7df82c"
  vm_type   = "ns-cus6-4c8r"
  subnet_id = numspot_subnet.subnet.id
}

resource "numspot_load_balancer" "testlb" {
  name = "load-balancer"
  type = "internal"

  listeners = [
    {
      backend_port           = 80
      load_balancer_port     = 80
      load_balancer_protocol = "TCP"
    }
  ]

  subnets         = [numspot_subnet.subnet.id]
  security_groups = [numspot_security_group.sg.id]
  backend_vm_ids  = [numspot_vm.vm.id]

  health_check = {
    check_interval      = 30
    healthy_threshold   = 10
    path                = "/index.html"
    port                = 8080
    protocol            = "HTTPS"
    timeout             = 5
    unhealthy_threshold = 5
  }

  tags = [
    {
      key   = "Env"
      value = "Prod"
    }
  ]
}


## Public Load Balancer

resource "numspot_vpc" "vpc" {
  ip_range = "10.101.0.0/16"
}

resource "numspot_internet_gateway" "ig" {
  vpc_id = numspot_vpc.vpc.id
}

resource "numspot_subnet" "subnet" {
  vpc_id                  = numspot_vpc.vpc.id
  ip_range                = "10.101.1.0/24"
  map_public_ip_on_launch = true
}

resource "numspot_security_group" "sg" {
  vpc_id      = numspot_vpc.vpc.id
  name        = "group name"
  description = "this is a security group"
  inbound_rules = [
    {
      from_port_range = 80
      to_port_range   = 80
      ip_ranges       = ["0.0.0.0/0"]
      ip_protocol     = "tcp"
    }
  ]
  outbound_rules = [
    {
      from_port_range = 80
      to_port_range   = 80
      ip_ranges       = ["0.0.0.0/0"]
      ip_protocol     = "tcp"
    }
  ]
}

resource "numspot_route_table" "route_table" {
  vpc_id    = numspot_vpc.vpc.id
  subnet_id = numspot_subnet.subnet.id

  routes = [
    {
      destination_ip_range = "0.0.0.0/0"
      gateway_id           = numspot_internet_gateway.ig.id
    }
  ]
}

resource "numspot_vm" "vm" {
  image_id = "ami-8ef5b47e"
  type     = "ns-cus6-4c8r"

  subnet_id = numspot_subnet.subnet.id
}

resource "numspot_load_balancer" "lb" {
  name = "elb-terraform-test-updated"
  listeners = [
    {
      backend_port           = 443
      load_balancer_port     = 443
      load_balancer_protocol = "TCP"
    },
    {
      backend_port           = 8080
      load_balancer_port     = 8080
      load_balancer_protocol = "TCP"
    }
  ]

  subnets         = [numspot_subnet.subnet.id]
  security_groups = [numspot_security_group.sg.id]
  backend_vm_ids  = [numspot_vm.vm.id]

  type = "internet-facing"

  health_check = {
    healthy_threshold   = 10
    check_interval      = 30
    path                = "/index.html"
    port                = 8080
    protocol            = "HTTPS"
    timeout             = 5
    unhealthy_threshold = 5
  }

  depends_on = [numspot_internet_gateway.ig]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `listeners` (Attributes Set) One or more listeners to create. (see [below for nested schema](#nestedatt--listeners))
- `name` (String) The unique name of the load balancer (32 alphanumeric or hyphen characters maximum, but cannot start or end with a hyphen).
- `subnets` (List of String) (Vpc only) The ID of the Subnet in which you want to create the load balancer. Regardless of this Subnet, the load balancer can distribute traffic to all Subnets. This parameter is required in a Vpc.

### Optional

- `backend_ips` (Set of String) One or more public IPs of back-end VMs.
- `backend_vm_ids` (Set of String) One or more IDs of back-end VMs for the load balancer.
- `health_check` (Attributes) Information about the health check configuration. (see [below for nested schema](#nestedatt--health_check))
- `public_ip` (String) (internet-facing only) The public IP you want to associate with the load balancer. If not specified, a public IP owned by NumSpot is associated.
- `security_groups` (List of String) (Vpc only) One or more IDs of security groups you want to assign to the load balancer. If not specified, the default security group of the Vpc is assigned to the load balancer.
- `tags` (Attributes List) One or more tags assigned to the load balancer. (see [below for nested schema](#nestedatt--tags))
- `type` (String) The type of load balancer: `internet-facing` or `internal`. Use this parameter only for load balancers in a Vpc.

### Read-Only

- `application_sticky_cookie_policies` (Attributes List) The stickiness policies defined for the load balancer. (see [below for nested schema](#nestedatt--application_sticky_cookie_policies))
- `dns_name` (String) The DNS name of the load balancer.
- `id` (String) ID for ReadLoadBalancers
- `secured_cookies` (Boolean) Whether secure cookies are enabled for the load balancer.
- `sticky_cookie_policies` (Attributes List) The policies defined for the load balancer. (see [below for nested schema](#nestedatt--sticky_cookie_policies))
- `vpc_id` (String) The ID of the Vpc for the load balancer.

<a id="nestedatt--listeners"></a>
### Nested Schema for `listeners`

Required:

- `backend_port` (Number) The port on which the back-end VM is listening (between `1` and `65535`, both included).
- `load_balancer_port` (Number) The port on which the load balancer is listening (between `1` and `65535`, both included).
- `load_balancer_protocol` (String) The routing protocol (`HTTP` \| `HTTPS` \| `TCP` \| `SSL`).

Optional:

- `backend_protocol` (String) The protocol for routing traffic to back-end VMs (`HTTP` \| `HTTPS` \| `TCP` \| `SSL`).
- `server_certificate_id` (String) The server certificate orn

Read-Only:

- `policy_names` (List of String) The names of the policies. If there are no policies enabled, the list is empty.


<a id="nestedatt--health_check"></a>
### Nested Schema for `health_check`

Optional:

- `check_interval` (Number) The number of seconds between two requests (between `5` and `600` both included).
- `healthy_threshold` (Number) The number of consecutive successful requests before considering the VM as healthy (between `2` and `10` both included).
- `path` (String) If you use the HTTP or HTTPS protocols, the request URL path.
- `port` (Number) The port number (between `1` and `65535`, both included).
- `protocol` (String) The protocol for the URL of the VM (`HTTP` \| `HTTPS` \| `TCP` \| `SSL`).
- `timeout` (Number) The maximum waiting time for a response before considering the VM as unhealthy, in seconds (between `2` and `60` both included).
- `unhealthy_threshold` (Number) The number of consecutive failed requests before considering the VM as unhealthy (between `2` and `10` both included).


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Required:

- `key` (String) The key of the tag, with a minimum of 1 character.
- `value` (String) The value of the tag, between 0 and 255 characters.


<a id="nestedatt--application_sticky_cookie_policies"></a>
### Nested Schema for `application_sticky_cookie_policies`

Read-Only:

- `cookie_name` (String) The name of the application cookie used for stickiness.
- `policy_name` (String) The mnemonic name for the policy being created. The name must be unique within a set of policies for this load balancer.


<a id="nestedatt--sticky_cookie_policies"></a>
### Nested Schema for `sticky_cookie_policies`

Read-Only:

- `cookie_expiration_period` (Number) The time period, in seconds, after which the cookie should be considered stale.<br />
If `1`, the stickiness session lasts for the duration of the browser session.
- `policy_name` (String) The name of the stickiness policy.
