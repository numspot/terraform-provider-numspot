---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 117
        transfer_encoding: []
        trailer: {}
        host: api.zex-integ.cloudgouv-eu-west-1.numspot.internal
        remote_addr: ""
        request_uri: ""
        body: ""
        form:
            grant_type:
                - client_credentials
        headers:
            Content-Type:
                - application/x-www-form-urlencoded
            User-Agent:
                - TERRAFORM-NUMSPOT
        url: https://api.zex-integ.cloudgouv-eu-west-1.numspot.internal/iam/token
        method: POST
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding: []
        trailer: {}
        content_length: 1229
        uncompressed: false
        body: '{"access_token": "just a fake token","expires_in": 3600}'
        headers:
            Api-Gateway-Completed:
                - "false"
            Connection:
                - keep-alive
            Content-Length:
                - "1229"
            Content-Type:
                - application/json
            Strict-Transport-Security:
                - max-age=31536000; includeSubDomains
            Vary:
                - Origin
            X-Krakend:
                - Version undefined
        status: 200 OK
        code: 200
        duration: 5ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 117
        transfer_encoding: []
        trailer: {}
        host: api.zex-integ.cloudgouv-eu-west-1.numspot.internal
        remote_addr: ""
        request_uri: ""
        body: ""
        form:
            grant_type:
                - client_credentials
        headers:
            Content-Type:
                - application/x-www-form-urlencoded
            User-Agent:
                - TERRAFORM-NUMSPOT
        url: https://api.zex-integ.cloudgouv-eu-west-1.numspot.internal/iam/token
        method: POST
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding: []
        trailer: {}
        content_length: 1229
        uncompressed: false
        body: '{"access_token": "just a fake token","expires_in": 3600}'
        headers:
            Api-Gateway-Completed:
                - "false"
            Connection:
                - keep-alive
            Content-Length:
                - "1229"
            Content-Type:
                - application/json
            Strict-Transport-Security:
                - max-age=31536000; includeSubDomains
            Vary:
                - Origin
            X-Krakend:
                - Version undefined
        status: 200 OK
        code: 200
        duration: 5ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 52
        transfer_encoding: []
        trailer: {}
        host: api.zex-integ.cloudgouv-eu-west-1.numspot.internal
        remote_addr: ""
        request_uri: ""
        body: '{"description":"the description","name":"the space"}'
        form: {}
        headers:
            Content-Type:
                - application/json
        url: https://api.zex-integ.cloudgouv-eu-west-1.numspot.internal/organisations/67d97ad4-3005-48dc-a392-60a97ab5097c/spaces
        method: POST
      response:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        transfer_encoding: []
        trailer: {}
        content_length: 275
        uncompressed: false
        body: |
            {"detail":"user 861e2d4f-aefa-4f78-bc27-ee9d7e209939 of tenant 67d97ad4-3005-48dc-a392-60a97ab5097c does not have permission 2d5cf1f5-801b-4baa-9b9e-758def12cb2b (iam.space.create)","title":"forbidden","type":"https://docs.numspot.cloud/docs/domains/cloud/errors#forbidden"}
        headers:
            Api-Gateway-Completed:
                - "false"
            Connection:
                - keep-alive
            Content-Length:
                - "275"
            Content-Type:
                - application/json
            Strict-Transport-Security:
                - max-age=31536000; includeSubDomains
            Vary:
                - Origin
            X-Krakend:
                - Version undefined
        status: 403 Forbidden
        code: 403
        duration: 5ms
